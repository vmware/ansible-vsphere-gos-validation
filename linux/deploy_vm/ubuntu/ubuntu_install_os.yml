# Copyright 2021-2023 VMware, Inc.
# SPDX-License-Identifier: BSD-2-Clause
---
# Start to Ubuntu OS install
- include_tasks: ./ubuntu_autoinstall.yml
  when: ubuntu_install_method is defined and ubuntu_install_method == "simulation"

# Wait for autoinstall start message in serial port output file
- include_tasks: ../../../common/vm_wait_log_msg.yml
  vars:
    vm_wait_log_name: "{{ vm_serial_port_output_file | basename }}"
    vm_wait_log_msg: "{{ autoinstall_start_msg }}"
    vm_wait_log_retries: 150
    vm_wait_log_delay: 5
  when:
    - ubuntu_install_method is defined
    - ubuntu_install_method == "cloud-init"
    - ubuntu_edition is defined
    - ubuntu_edition == "server"
